server {
    listen 80 default_server;
    server_name _;                         # Container selbst, kein FQDN nötig
    root /var/www/html/public;             # Laravel public/
    client_max_body_size 64M;              # Match PHP-FPM upload_max_filesize

    # Haupt-Location
    location / {
        try_files $uri $uri/ /index.php?$query_string;
    }

    # PHP-Dateien via FPM
    location ~ \.php$ {
        include        fastcgi_params;
        fastcgi_pass   127.0.0.1:9000;     # PHP-FPM im gleichen Container
        fastcgi_index  index.php;
        fastcgi_param  SCRIPT_FILENAME $document_root$fastcgi_script_name;
    }

    # Sicherheit: verbiete Zugriffe auf sensible Dateien
    location ~ /\.(env|git|idea|vscode|htaccess)$ { deny all; }

    # Optional: statische Assets länger cachen
    location ~* \.(js|css|png|jpg|jpeg|gif|svg|webp|ico|ttf|woff|woff2)$ {
        expires 30d;
        access_log off;
    }
}